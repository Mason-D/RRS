@model RRS.Data.Reservation

@{
    ViewData["Title"] = "Index";
    var reversedDatePart = ViewData["getReservationsByDate"];
}

<h2>Reservations</h2>

<p>
    <a asp-action="Create">Create Reservation</a>
</p>

<hr />
@*<form method="get" asp-action="Index">
    <label for="selectDate">Date:</label>
    <input type="date" id="selectDate" value="@ViewData["getReservationsByDate"]" name="date" onchange="this.form.submit()" />
    <input type="submit" value="Search" class="btn btn-primary" />
</form>*@


<label class="fw-bold" for="dateControl">Sitting date:</label>
<input type="date" id="dateControl" name="trip-start" value=@reversedDatePart />


<table id="reservationsT" class="table table-striped container-fluid">
            <thead>
                <tr>
                    <th class="col-1">Time</th>
                    <th class="col-1">Type</th>
                    <th class="col-2">Customer</th>
                    <th class="col-1">Phone</th>
                    <th class="col-1">Guests</th>
                    <th class="col-1">Status</th>
                    <th class="col-2">Notes</th>
                    <th class="col-1"></th>
                </tr>
            </thead>
            <tbody id="reservationsTBody"></tbody>
        </table>

@*<table class="table container-fluid">
    <thead>
        <tr>
            <th class="col-1">
                Time
            </th>

            <th class="col-1">
                Type
            </th>

            <th class="col-2">
                Customer
            </th>

            <th class="col-1">
                Contact
            </th>

            <th class="col-1">
                Guests
            </th>

            <th class="col-1">
                Status
            </th>

            <th class="col-1">
                Origin
            </th>

            <th class="col-2">
                Notes
            </th>
            <th class="col-2"></th>
        </tr>
    </thead>
    <tbody>
@foreach (var res in Model) {
        <tr>
            <td>
                @res.StartTime.ToString("h:mm tt")
            </td>
            <td>
                @res.Sitting.SittingType.Description
            </td>
            <td>
                @res.Customer.FirstName
                @res.Customer.LastName
            </td>
            <td>
                @res.Customer.PhoneNumber
            </td>
            <td>
                @res.NoOfGuests
            </td>
            <td>
                @res.ReservationStatus.Description
            </td>
            <td>
                @res.ReservationOrigin.Description
            </td>
            <td>
                @res.CustomerNotes
            </td>
            <td>
                <a type="button" class="btn btn-primary" asp-action="Edit" asp-route-id="@res.Id"> Edit </a>
                <a type="button" class="btn btn-success" asp-action="Details" asp-route-id="@res.Id">Details</a>   
            </td>
        </tr>
}
    </tbody>
</table>*@

@section Scripts{
    <script src=~/js/admin.reservation.index.js></script>
}
